
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tracer Onboarding</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/britti-sans-trial" />
  <link rel="stylesheet" href="index.css">
  <style>
    .github-button {
      display: inline-block;
      padding: 0.75rem 1.25rem;
      background-color: #24292e;
      color: white;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .github-button:hover {
      background-color: #2c3136;
    }
    
    .github-button i {
      margin-left: 0.5rem;
    }
    
    .github-codespace-instructions ul li {
      margin-bottom: 0.5rem;
    }
    
    .github-codespace-instructions h4 {
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
    }

    /* Profile section styles */
    .sticky-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .profile-section {
      position: relative;
      margin-right: 20px;
    }

    .profile-button {
      cursor: pointer;
    }

    .profile-avatar {
      width: 32px;
      height: 32px;
      background-color: #4A86E8;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px; /* Smaller font size for the P letter */
    }

    .profile-dropdown {
      position: absolute;
      top: 45px;
      right: 0;
      width: 280px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      display: none;
    }

    .profile-info {
      display: flex;
      padding: 16px;
      border-bottom: 1px solid #eaeaea;
    }

    .profile-avatar-large {
      width: 48px;
      height: 48px;
      background-color: #4A86E8;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 16px; /* Smaller font size for the P letter */
      margin-right: 12px;
    }

    .profile-details {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .profile-name {
      font-weight: 500;
      color: #333;
    }

    .profile-email {
      font-size: 0.85rem;
      color: #666;
    }

    .profile-menu {
      padding: 8px 0;
    }

    .profile-menu-item {
      display: flex;
      align-items: center;
      padding: 8px 16px;
      color: #333;
      text-decoration: none;
      transition: background-color 0.2s;
      font-size: 14px; /* Smaller text size */
    }

    .profile-menu-item:hover {
      background-color: #f5f5f5;
    }

    .profile-menu-item i {
      margin-right: 12px; /* Increased spacing between icon and text */
      width: 16px;
      color: #666;
    }

    .profile-footer {
      padding: 8px 16px;
      font-size: 0.8rem;
      color: #999;
      border-top: 1px solid #eaeaea;
      text-align: center;
    }
  </style>
</head>
<body>
  <!-- Add sticky header before the container -->
  <div class="sticky-header">
    <div class="logo">
      <img src="../assets/icons/Tracer-Vector.svg" alt="Tracer Logo">
    </div>
    <div class="profile-section">
      <div class="profile-button" id="profile-button">
        <div class="profile-avatar">P</div>
      </div>
      <div class="profile-dropdown" id="profile-dropdown">
        <div class="profile-info">
          <div class="profile-avatar-large">P</div>
          <div class="profile-details">
            <div class="profile-name">Paul Taylor</div>
            <div class="profile-email">paul@tracer.cloud</div>
          </div>
        </div>
        <div class="profile-menu">
          <a href="#" class="profile-menu-item">
            <i class="fas fa-user-cog"></i>
            Manage account
          </a>
          <a href="#" class="profile-menu-item">
            <i class="fas fa-sign-out-alt"></i>
            Sign out
          </a>
        </div>
        <div class="profile-footer">
          Powered by <i class="fab fa-github"></i>
        </div>
      </div>
    </div>
  </div>
  
  <div class="container">
    <div class="left-panel">
      <!-- Remove the logo and title from here since they're now in the sticky header -->
      <div class="header-section">
        <h1>Welcome to Tracer</h1>
        <p class="subtitle">Let's get you set up with your preferred tech stack.</p>
      </div>
      
      <div class="step">
        <div class="step-header">Step 1</div>
        <div class="step-title">Environment</div>
        <div class="step-description">Choose the environment Tracer will run in</div>
        <div class="options" id="environment-options">
          <button class="option selected" data-value="demo">
            <i class="fab fa-github"></i>
            Demo
          </button>
          <button class="option" data-value="cloud">
            <i class="fas fa-cloud"></i>
            Cloud
          </button>
          <button class="option" data-value="local">
            <i class="fas fa-laptop-code"></i>
            Local System
          </button>
        </div>
      </div>
      
      <div class="step">
        <div class="step-header">Step 2</div>
        <div class="step-title">System</div>
        <div class="step-description">Choose the exact system you will run Tracer in</div>
        
        <div class="section-title">Cloud</div>
        <div class="options" id="system-options-cloud">
          <button class="option" data-value="aws">
            <i class="fab fa-aws"></i>
            AWS
          </button>
          <button class="option" data-value="gcp">
            <i class="fab fa-google"></i>
            GCP
          </button>
          <button class="option" data-value="azure">
            <i class="fab fa-microsoft"></i>
            Azure
          </button>
        </div>
        
        <div class="section-title" style="margin-top: 2rem;">Local</div>
        <div class="options" id="system-options-local">
          <button class="option" data-value="apple">
            <i class="fab fa-apple"></i>
            Apple
          </button>
          <button class="option" data-value="microsoft">
            <i class="fab fa-windows"></i>
            Microsoft
          </button>
          <button class="option selected" data-value="linux">
            <i class="fab fa-linux"></i>
            Linux
          </button>
        </div>
      </div>
      
      <div class="step">
        <div class="step-header">Step 3</div>
        <div class="step-title">Nodes</div>
        <div class="step-description">Choose the number of nodes for Tracer</div>
        <div class="options" id="nodes-options">
          <button class="option selected" data-value="single">
            <i class="fab fa-aws"></i>
            Single Node
          </button>
          <button class="option" data-value="multi">
            <i class="fas fa-layer-group"></i>
            Multi Node - AWS Batch
          </button>
        </div>
      </div>
      
      <div class="step">
        <div class="step-header">Step 4</div>
        <div class="step-title">Pipeline</div>
        <div class="step-description">Choose how you want to run Tracer</div>
        <div class="options" id="pipeline-options">
          <button class="option selected" data-value="demo">
            <i class="fas fa-play"></i>
            Use Tracer Demo
          </button>
          <button class="option" data-value="own">
            <i class="fas fa-code"></i>
            Run Your Own
          </button>
        </div>
      </div>
      
      <div class="cta-section" style="padding: 2rem; border-bottom: 1px solid var(--border);">
        <p class="cta-text" style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-secondary);">Get personalized guidance from our team of experts</p>
        <a href="https://calendly.com/your-calendly-link" target="_blank" rel="noopener noreferrer" class="cta-button" style="display: block; padding: 1rem 1.5rem; font-size: 1.1rem; font-weight: 500; width: 100%; max-width: 280px; margin: 0.5rem 0; text-decoration: none; background-color: white; color: #000000; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
          <i class="fas fa-calendar-check" style="margin-right: 0.75rem; font-size: 1.2rem; color: #000000;"></i>
          Schedule a Demo Call
        </a>
      </div>
    </div>
    
    <div class="right-panel">
      <div class="preview-header">
        <i class="fas fa-eye"></i> Preview
      </div>
      
      <div class="tabs">
        <div class="tab active" data-tab="install">Install Tracer</div>
        <div class="tab" data-tab="config">Run Pipelines</div>
        <div class="tab" data-tab="run">Login Dashboards</div>
      </div>
      
      <div id="content-area">
        <div class="tab-content active" id="install-content">
          <h2>Install Tracer</h2>
          
          <div class="github-codespace-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
            <h3>Installation Instructions</h3>
            <h4>Github Codespace demo environment</h4>
            
            <p>Github Codespaces gives you an easy way to test Tracer's functionality without needing to install anything into your own system.</p>
            <p><em>Note that for perfect functionality, you should run Tracer on your own system. We cannot guarantee full functionality due to root access requirements.</em></p>
            
            <h4>Step 1: Open GitHub Codespaces</h4>
            <p>Codespaces will be your coding environment to run any pipeline as an alternative to installing Tracer into your own system.</p>
            <p>Press button below "Open GitHub Codespaces" and log into GitHub</p>
            
            <div style="margin: 1.5rem 0;">
              <a href="https://github.com/Tracer-Cloud/tracer-test-pipelines-bioinformatics/codespaces" target="_blank" class="github-button">
                <i class="fab fa-github"></i> Open GitHub Codespaces
              </a>
            </div>
            
            <h4>Step 2: Create a new Codespace</h4>
            <p>⚠️ Important: update 'machine type' to 16-core before launching.</p>
            <p>This will allow for compute-intense processes to run faster.</p>
            <div style="margin: 1.5rem 0;">
              <img src="../assets/images/Tracer-Cloud/tracer-test-pipelines-bioinformatics.webp" alt="Codespace creation interface" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--border);">
            </div>
            
            <h4>Step 3: Install Tracer</h4>
            <p>Before running any pipeline, you need to install Tracer once into your operating system.</p>
            <p>For Codespaces, as with any cloud system, we install the below line of code into the terminal:</p>
            <div class="code-container">
              <pre><code>curl -sSL https://install.tracer.cloud/ | bash -s -- demo && . ~/.bashrc</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>Tracer is now connected to your Codespaces' system. This is a one time installation.</p>
          </div>
        </div>
        
        <div class="tab-content" id="config-content">
          <h2>Run Pipelines</h2>
          
          <!-- Demo environment instructions (GitHub Codespaces) -->
          <div class="github-codespace-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
            <h3>Run Pipelines in Demo Environment</h3>
            
            <h4>Step 4: Launch pipeline</h4>
            <p>For every new pipeline you launch, you run the below code in the Codespaces terminal:</p>
            <div class="code-container">
              <pre><code>tracer init</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>It will ask you to setup the parameters of this pipeline. This allows for customisation and easy information retrieval later:</p>
            <ul style="list-style-type: none; padding-left: 1rem;">
              <li>--pipeline-name: what name do you give this pipeline? (one pipeline consists of multiple runs)</li>
              <li>--environment: what is the environment you are running this in?</li>
              <li>--pipeline-type: what type of pipeline are you running e.g., rnaseq, scrnaseq, xxxx. note you could also name this after a cost centre or team so that you can easily search the other pipelines</li>
              <li>--user-operator: what is your name/who is running this pipeline?</li>
            </ul>
            <p><strong>⚠️</strong> Add the "tracer init" line at the start of each pipeline. This allows the Tracer system to track each pipeline separately and combine the different runs when they have the same pipeline name.</p>
            
            <h4>Step 5: Run pipeline</h4>
            <p>We have pre-installed some pipelines in the Codespaces for you to run.</p>
            <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
            <div class="code-container">
              <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir results -resume</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the <code>pipelines</code> files</p>
            <p>Play around with the other pipelines, have fun!</p>
          </div>
          
          <!-- Tracer Demo option content -->
          <div class="tracer-demo-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2); display: none;">
            <h4>Step 3: Run pipeline</h4>
            <p>We have pre-installed some pipelines the github repo for you to run.</p>
            <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
            <div class="code-container">
              <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the <code>pipelines</code> files for you to test out.</p>
            <p>Play around with the other pipelines, have fun! 🎮</p>
          </div>
          
          <!-- Non-demo environment instructions (Local/Cloud) -->
          <div class="local-cloud-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2); display: none;">
            <h3>Installation Instructions</h3>
            <h4>Tracer pipelines</h4>
            
            <p>If you want to try with some prepared pipelines by Tracer, you can follow these following steps</p>
            
            <h4>Step 1: clone the Tracer repository</h4>
            <p>This includes a range of pipelines written in different languages (e.g., Bash, Nextflow, WDL, and CWL)</p>
            <div class="code-container">
              <pre><code>git clone https://github.com/Tracer-Cloud/tracer-test-pipelines-bioinformatics.git
cd tracer-test-pipelines-bioinformatics</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            
            <h4>Step 2: Install Tracer init</h4>
            <p>For every new pipeline you launch, you run the below code in your terminal:</p>
            <div class="code-container">
              <pre><code>tracer init</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>It will ask you to setup the parameters of this pipeline. This allows for customisation and easy information retrieval later:</p>
            <ul style="list-style-type: none; padding-left: 1rem;">
              <li>--pipeline-name: what name do you give this pipeline? (one pipeline consists of multiple runs)</li>
              <li>--environment: what is the environment you are running this in?</li>
              <li>--pipeline-type: what type of pipeline are you running e.g., rnaseq, scrnaseq, xxxx. note you could also name this after a cost centre or team so that you can easily search the other pipelines</li>
              <li>--user-operator: what is your name/who is running this pipeline?</li>
            </ul>
            <p><strong>⚠️</strong> Add the "tracer init" line at the start of each pipeline. This allows the Tracer system to track each pipeline separately and combine the different runs when they have the same pipeline name.</p>
            
            <h4>Step 3: Run pipeline</h4>
            <p>We have pre-installed some pipelines the github repo for you to run.</p>
            <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
            <div class="code-container">
              <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the <code>pipelines</code> files for you to test out.</p>
            <p>Play around with the other pipelines, have fun! 🎮</p>
          </div>
        </div>
        
        <div class="tab-content" id="run-content">
          <h2>Login Dashboards</h2>
          
          <div class="github-codespace-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
            <h3>Installation Instructions</h3>
            <h4>Grafana Dashboards</h4>
            
            <p>Tracer uses the Grafana Dashboard functionality - powered by Open Telemetry - to portray the metrics, logs and other graphs. For this, you will have to make a personal account only accessible to you:</p>
            
            <h4>Step 1: Generate your Grafana credentials</h4>
            <p>Click on the below button then go to your email inbox to click "accept invitation"</p>
            
            <div style="margin: 1.5rem 0;">
              <a href="#" class="github-button" style="background-color: #F46800; display: inline-flex; align-items: center;">
                <span style="margin-right: 0.5rem;">Send Grafana Credentials</span>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z" fill="white"/>
                  <path d="M13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="#F46800"/>
                </svg>
              </a>
            </div>
            
            <h4>Step 2: Sign up and open Grafana</h4>
            <p>Sign up to Grafana using the same email address.</p>
            
            <p>Under Dashboards > Tracer, you will find the Tracer-curated dashboards for your pipeline monitoring, optimisation, and error solution.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Add profile dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
      const profileButton = document.getElementById('profile-button');
      const profileDropdown = document.getElementById('profile-dropdown');
      
      // Toggle dropdown when profile button is clicked
      profileButton.addEventListener('click', function(e) {
        e.stopPropagation();
        profileDropdown.style.display = profileDropdown.style.display === 'block' ? 'none' : 'block';
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!profileDropdown.contains(e.target) && e.target !== profileButton) {
          profileDropdown.style.display = 'none';
        }
      });
    });

    // Configuration data for different combinations
    const configData = {
      // Demo environment
      'demo-linux-single-demo': {
        install: `curl -sSL https://install.tracer.cloud/ | bash -s -- demo && . ~/.bashrc`,
        config: `tracer init --pipeline-name rnaseq-demo-123 \\
--environment demo \\
--user-operator vincent \\
--pipeline-type rnaseq`,
        run: `cd test-rnaseq-light
nextflow run main.nf`
      },
      'demo-linux-single-own': {
        install: `curl -sSL https://install.tracer.cloud/ | bash`,
        config: `tracer init --pipeline-name custom-pipeline \\
    --environment demo \\
    --user-operator vincent \\
    --pipeline-type custom`,
        run: `# Run your custom pipeline with Tracer
tracer run --pipeline-path /path/to/your/pipeline`
      },
      
      // Cloud environment
      'cloud-aws-single-demo': {
        install: `# AWS CloudFormation template installation
aws cloudformation create-stack \\
    --stack-name tracer-stack \\
    --template-url https://tracer-templates.s3.amazonaws.com/tracer-aws.yml`,
        config: `# Configure AWS environment variables
export AWS_ACCESS_KEY_ID=XXXXXXX
export AWS_SECRET_ACCESS_KEY=XXXXXXXX
export AWS_LOG_LEVEL="debug"

# Initialize Tracer
tracer init --pipeline-name aws_batch_test \\
    --environment sandbox \\
    --user-operator vincent \\
    --pipeline-type aws_batch_rnaseq`,
        run: `# Run the RNA-seq test pipeline on AWS Batch
make test_rnaseq_aws_batch`
      },
      
      // Local environment
      'local-linux-single-demo': {
        install: `# Install Tracer on local Linux system
curl -sSL https://install.tracer.cloud/ | bash && source ~/.bashrc`,
        config: `# Configure Tracer for local environment
tracer init --pipeline-name local-rnaseq \\
    --environment local \\
    --user-operator $(whoami) \\
    --pipeline-type rnaseq`,
        run: `# Run the demo pipeline locally
cd frameworks/nextflow-mini/test-rnaseq-light
nextflow run main.nf`
      }
    };
    
    // Default configuration
    let currentConfig = {
      environment: 'demo',
      system: 'linux',
      nodes: 'single',
      pipeline: 'demo'
    };
    
    // Function to update content based on selections
    function updateContent() {
      const configKey = `${currentConfig.environment}-${currentConfig.system}-${currentConfig.nodes}-${currentConfig.pipeline}`;
      
      // Try to get the exact match first
      let config = configData[configKey];
      
      // If no exact match, fall back to demo-linux-single-demo
      if (!config) {
        config = configData['demo-linux-single-demo'];
      }
      
      // Only update the run-content, not the install-content
      document.querySelector('#run-content pre code').textContent = config.run;
      
      // Always clear the Run Pipelines tab content
      const configContent = document.querySelector('#config-content');
      if (configContent) {
        // Save the heading
        const heading = configContent.querySelector('h2');
        const headingClone = heading ? heading.cloneNode(true) : document.createElement('h2');
        headingClone.textContent = headingClone.textContent || 'Run Pipelines';
        
        // Clear the content
        configContent.innerHTML = '';
        
        // Add back the heading
        configContent.appendChild(headingClone);
        
        // Add placeholder message
        const message = document.createElement('div');
        message.className = 'demo-only-message';
        message.style.marginTop = '2rem';
        message.style.padding = '1.5rem';
        message.style.borderRadius = '8px';
        message.style.backgroundColor = 'rgba(0,0,0,0.2)';
        message.style.border = '1px solid var(--border)';
        message.innerHTML = '<h3>Demo Content Only</h3><p>Content is only available when "Demo" environment is selected.</p>';
        
        configContent.appendChild(message);
      }
    }
    
    // Function to update UI based on environment and pipeline selection
    function updateUIBasedOnEnvironment(environment) {
      // Get all system option sections
      const localSystemOptions = document.getElementById('system-options-local');
      const cloudSystemOptions = document.getElementById('system-options-cloud');
      const localSectionTitle = document.querySelector('.section-title:nth-of-type(1)');
      const cloudSectionTitle = document.querySelector('.section-title:nth-of-type(2)');
      const nodesOptions = document.getElementById('nodes-options');
      const pipelineOptions = document.getElementById('pipeline-options');
      
      // Get the selected pipeline option
      const selectedPipeline = document.querySelector('#pipeline-options .option.selected')?.getAttribute('data-value') || 'demo';
      
      // Reset all options to normal state
      document.querySelectorAll('.option').forEach(opt => {
        opt.classList.remove('disabled');
        opt.disabled = false;
      });
      
      // Handle Install Tracer tab content
      const installContent = document.getElementById('install-content');
      if (installContent) {
        // Keep only the heading
        const heading = installContent.querySelector('h2');
        const headingClone = heading ? heading.cloneNode(true) : document.createElement('h2');
        headingClone.textContent = headingClone.textContent || 'Install Tracer';
        
        // Clear the content
        installContent.innerHTML = '';
        
        // Add back the heading
        installContent.appendChild(headingClone);
      }
      
      // Handle Run Pipelines tab content
      const configContent = document.getElementById('config-content');
      if (configContent) {
        // Check if the Run Pipelines tab is currently active
        const isConfigTabActive = document.querySelector('.tab[data-tab="config"]').classList.contains('active');
        
        if (isConfigTabActive) {
          if (environment !== 'demo') {
            // Save the heading
            const heading = configContent.querySelector('h2');
            const headingClone = heading ? heading.cloneNode(true) : document.createElement('h2');
            headingClone.textContent = headingClone.textContent || 'Run Pipelines';
            
            // Clear the content
            configContent.innerHTML = '';
            
            // Add back the heading
            configContent.appendChild(headingClone);
            
            // Add Step 3 content for non-Demo environments
            configContent.innerHTML += `
              <div class="tracer-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
                <h4>Step 3: Run pipeline</h4>
                <p>We have pre-installed some pipelines the github repo for you to run.</p>
                <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
                <div class="code-container">
                  <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir</code></pre>
                  <button class="copy-btn">
                    <i class="fas fa-copy"></i>
                  </button>
                </div>
                <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the <code>pipelines</code> files for you to test out.</p>
                <p>Play around with the other pipelines, have fun! 🧬</p>
              </div>
            `;
            
            // Add event listeners to copy buttons
            configContent.querySelectorAll('.copy-btn').forEach(btn => {
              btn.addEventListener('click', function() {
                const code = this.previousElementSibling.textContent;
                navigator.clipboard.writeText(code);
                
                // Visual feedback
                const originalIcon = this.innerHTML;
                this.innerHTML = '<i class="fas fa-check"></i>';
                setTimeout(() => {
                  this.innerHTML = originalIcon;
                }, 2000);
              });
            });
          } else {
            // Original Demo content for Run Pipelines tab
            configContent.innerHTML = `
              <h2>Run Pipelines</h2>
              
              <div class="tracer-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
                <h4>Step 4: Launch pipeline</h4>
                <p>For every new pipeline you launch, you run the below code in the Codespaces terminal:</p>
                <div class="code-container">
                  <pre><code>tracer init</code></pre>
                  <button class="copy-btn">
                    <i class="fas fa-copy"></i>
                  </button>
                </div>
                <p>It will ask you to setup the parameters of this pipeline. This allows for customisation and easy information retrieval later:</p>
                <ul style="list-style-type: none; padding-left: 1rem;">
                  <li>--pipeline-name: what name do you give this pipeline? (one pipeline consists of multiple runs)</li>
                  <li>--environment: what is the environment you are running this in?</li>
                  <li>--pipeline-type: what type of pipeline are you running e.g., rnaseq, scrnaseq, xxxx. note you could also name this after a cost centre or team so that you can easily search the other pipelines</li>
                  <li>--user-operator: what is your name/who is running this pipeline?</li>
                </ul>
                
                <h4>Step 5: Run pipeline</h4>
                <p>We have pre-installed some pipelines in the Codespaces for you to run.</p>
                <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
                <div class="code-container">
                  <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir results -resume</code></pre>
                  <button class="copy-btn">
                    <i class="fas fa-copy"></i>
                  </button>
                </div>
                <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the <code>pipelines</code> files</p>
                <p>Play around with the other pipelines, have fun!</p>
              </div>
            `;
            
            // Add event listeners to copy buttons
            configContent.querySelectorAll('.copy-btn').forEach(btn => {
              btn.addEventListener('click', function() {
                const code = this.previousElementSibling.textContent;
                navigator.clipboard.writeText(code);
                
                // Visual feedback
                const originalIcon = this.innerHTML;
                this.innerHTML = '<i class="fas fa-check"></i>';
                setTimeout(() => {
                  this.innerHTML = originalIcon;
                }, 2000);
              });
            });
          }
        }
      }
      
      // Handle environment-specific logic for UI elements
      if (environment === 'demo') {
        // If demo is selected, disable ALL system, nodes, and pipeline options
        // including the selected ones
        
        // First, store which options are selected for internal tracking
        const selectedSystem = localSystemOptions.querySelector('.option.selected') || 
                              cloudSystemOptions.querySelector('.option.selected');
        const selectedNode = nodesOptions.querySelector('.option.selected');
        const selectedPipeline = pipelineOptions.querySelector('.option.selected');
        
        // Now disable all options
        document.querySelectorAll('#system-options-local .option, #system-options-cloud .option, #nodes-options .option, #pipeline-options .option').forEach(opt => {
          opt.classList.add('disabled');
          opt.disabled = true;
        });
        
        // Make sure the selected options are still tracked internally
        if (selectedSystem) selectedSystem.classList.add('selected');
        if (selectedNode) selectedNode.classList.add('selected');
        if (selectedPipeline) selectedPipeline.classList.add('selected');
        
        // Disable section titles for system
        localSectionTitle.classList.add('disabled');
        cloudSectionTitle.classList.add('disabled');
        
        // Add the Tracer Demo content to the pipeline options
        const tracerDemoOption = document.querySelector('#pipeline-options .option[data-value="demo"]');
        if (tracerDemoOption && !tracerDemoOption.nextElementSibling?.classList.contains('tracer-demo-instructions')) {
          // Remove any existing instructions
          document.querySelectorAll('.tracer-demo-instructions').forEach(el => el.remove());
          
          // Create the instructions element
          const tracerDemoInstructions = document.createElement('div');
          tracerDemoInstructions.className = 'tracer-demo-instructions';
          tracerDemoInstructions.style.marginTop = '1rem';
          tracerDemoInstructions.style.marginBottom = '1rem';
          tracerDemoInstructions.style.border = '1px solid var(--border)';
          tracerDemoInstructions.style.padding = '1.5rem';
          tracerDemoInstructions.style.borderRadius = '8px';
          tracerDemoInstructions.style.backgroundColor = 'rgba(0,0,0,0.2)';
          tracerDemoInstructions.style.display = selectedPipeline && selectedPipeline.getAttribute('data-value') === 'demo' ? 'block' : 'none';
          
          tracerDemoInstructions.innerHTML = `
            <h3>Installation Instructions</h3>
            <h4>Tracer pipelines</h4>
            
            <p>If you want to try with some prepared pipelines by Tracer, you can follow these following steps</p>
            
            <h4>Step 1: clone the Tracer repository</h4>
            <p>This includes a range of pipelines written in different languages (e.g., Bash, Nextflow, WDL, and CWL)</p>
            <div class="code-container">
              <pre><code>git clone https://github.com/Tracer-Cloud/tracer-test-pipelines-bioinformatics.git
cd tracer-test-pipelines-bioinformatics</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            
            <h4>Step 2: Install Tracer init</h4>
            <p>For every new pipeline you launch, you run the below code in your terminal:</p>
            <div class="code-container">
              <pre><code>tracer init</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>It will ask you to setup the parameters of this pipeline. This allows for customisation and easy information retrieval later:</p>
            <ul style="list-style-type: none; padding-left: 1rem;">
              <li>--pipeline-name: what name do you give this pipeline? (one pipeline consists of multiple runs)</li>
              <li>--environment: what is the environment you are running this in?</li>
              <li>--pipeline-type: what type of pipeline are you running e.g., rnaseq, scrnaseq, xxxx. note you could also name this after a cost centre or team so that you can easily search the other pipelines</li>
              <li>--user-operator: what is your name/who is running this pipeline?</li>
            </ul>
            <p><strong>⚠️</strong> Add the "tracer init" line at the start of each pipeline. This allows the Tracer system to track each pipeline separately and combine the different runs when they have the same pipeline name.</p>
            
            <h4>Step 3: Run pipeline</h4>
            <p>We have pre-installed some pipelines the github repo for you to run.</p>
            <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
            <div class="code-container">
              <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir</code></pre>
              <button class="copy-btn">
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the <code>pipelines</code> files for you to test out.</p>
            <p>Play around with the other pipelines, have fun! 🎮</p>
          `;
          
          // Insert after the "Use Tracer Demo" button
          tracerDemoOption.parentNode.insertBefore(tracerDemoInstructions, tracerDemoOption.nextSibling);
          
          // Add event listeners to copy buttons
          tracerDemoInstructions.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', function() {
              const code = this.previousElementSibling.textContent;
              navigator.clipboard.writeText(code);
              
              // Visual feedback
              const originalIcon = this.innerHTML;
              this.innerHTML = '<i class="fas fa-check"></i>';
              setTimeout(() => {
                this.innerHTML = originalIcon;
              }, 2000);
            });
          });
        }
        
        // Show/hide the instructions based on which pipeline option is selected
        const tracerDemoInstructions = document.querySelector('.tracer-demo-instructions');
        if (tracerDemoInstructions) {
          tracerDemoInstructions.style.display = selectedPipeline && selectedPipeline.getAttribute('data-value') === 'demo' ? 'block' : 'none';
        }
        
      } else if (environment === 'cloud') {
        // If cloud is selected, enable cloud options and disable local options
        localSystemOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.add('disabled');
          opt.disabled = true;
          opt.classList.remove('selected');
        });
        
        cloudSystemOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.remove('disabled');
          opt.disabled = false;
        });
        
        // Enable nodes and pipeline options
        nodesOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.remove('disabled');
          opt.disabled = false;
        });
        
        pipelineOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.remove('disabled');
          opt.disabled = false;
        });
        
        // Select AWS by default for cloud
        selectOptionInGroup('system-options-cloud', 'aws');
        currentConfig.system = 'aws';
        
        // Update section titles
        localSectionTitle.classList.add('disabled');
        cloudSectionTitle.classList.remove('disabled');
        
        // Remove any Tracer Demo instructions
        document.querySelectorAll('.tracer-demo-instructions').forEach(el => el.remove());
        
      } else if (environment === 'local') {
        // If local is selected, enable local options and disable cloud options
        cloudSystemOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.add('disabled');
          opt.disabled = true;
          opt.classList.remove('selected');
        });
        
        localSystemOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.remove('disabled');
          opt.disabled = false;
        });
        
        // Enable nodes and pipeline options
        nodesOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.remove('disabled');
          opt.disabled = false;
        });
        
        pipelineOptions.querySelectorAll('.option').forEach(opt => {
          opt.classList.remove('disabled');
          opt.disabled = false;
        });
        
        // Select Linux by default for local
        selectOptionInGroup('system-options-local', 'linux');
        currentConfig.system = 'linux';
        
        // Update section titles
        cloudSectionTitle.classList.add('disabled');
        localSectionTitle.classList.remove('disabled');
        
        // Remove any Tracer Demo instructions
        document.querySelectorAll('.tracer-demo-instructions').forEach(el => el.remove());
      }
      
      // Update content based on new selection
      updateContent();
      
      // Ensure Install Tracer content is updated
      ensureInstallTracerContent();
    }
    
    // Helper function to select an option in a group
    function selectOptionInGroup(groupId, value) {
      const group = document.getElementById(groupId);
      if (!group) return;
      
      // Remove selected class from all options in this group
      group.querySelectorAll('.option').forEach(opt => {
        opt.classList.remove('selected');
      });
      
      // Add selected class to the specified option
      const option = group.querySelector(`.option[data-value="${value}"]`);
      if (option) {
        option.classList.add('selected');
      }
    }
    
    // Set up option selection
    document.querySelectorAll('.options').forEach(optionGroup => {
      optionGroup.querySelectorAll('.option').forEach(option => {
        option.addEventListener('click', () => {
          if (option.disabled || option.classList.contains('disabled')) {
            return; // Don't do anything if the option is disabled
          }
          
          // Remove selected class from all options in this group
          optionGroup.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('selected');
          });
          
          // Add selected class to clicked option
          option.classList.add('selected');
          
          // Update current configuration
          const groupId = optionGroup.id;
          const value = option.getAttribute('data-value');
          
          if (groupId === 'environment-options') {
            currentConfig.environment = value;
            updateUIBasedOnEnvironment(value);
          } else if (groupId === 'system-options-local' || groupId === 'system-options-cloud') {
            currentConfig.system = value;
            updateContent();
          } else if (groupId === 'nodes-options') {
            currentConfig.nodes = value;
            updateContent();
          } else if (groupId === 'pipeline-options') {
            currentConfig.pipeline = value;
            // Also update UI when pipeline selection changes
            updateUIBasedOnEnvironment(currentConfig.environment);
            updateContent();
          }
        });
      });
    });
    
    // Set up tab switching
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
          // Remove active class from all tabs
          document.querySelectorAll('.tab').forEach(t => {
            t.classList.remove('active');
          });
          
          // Add active class to clicked tab
          tab.classList.add('active');
          
          // Hide all tab content
          document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
          });
          
          // Show content for active tab
          const tabId = tab.getAttribute('data-tab');
          document.getElementById(`${tabId}-content`).classList.add('active');
          
          // Special handling for Run Pipelines tab
          if (tabId === 'config') {
            const configContent = document.getElementById('config-content');
            const heading = configContent.querySelector('h2');
            
            // Check if Demo environment is selected
            const isDemoSelected = document.querySelector('#environment-options .option.selected').getAttribute('data-value') === 'demo';
            
            // If not Demo, clear content and show message
            if (!isDemoSelected) {
              // Save the heading
              const headingClone = heading.cloneNode(true);
              
              // Clear the content
              configContent.innerHTML = '';
              
              // Add back the heading
              configContent.appendChild(headingClone);
              
              // Add placeholder message
              const message = document.createElement('div');
              message.className = 'demo-only-message';
              message.style.marginTop = '2rem';
              message.style.padding = '1.5rem';
              message.style.borderRadius = '8px';
              message.style.backgroundColor = 'rgba(0,0,0,0.2)';
              message.style.border = '1px solid var(--border)';
              message.innerHTML = '<h3>Demo Content Only</h3><p>Content is only available when "Demo" environment is selected.</p>';
              
              configContent.appendChild(message);
            }
          }
        });
      });
      
      // Add event listeners to environment options
      document.querySelectorAll('#environment-options .option').forEach(option => {
        option.addEventListener('click', () => {
          // Check if Run Pipelines tab is active
          const isConfigTabActive = document.querySelector('.tab[data-tab="config"]').classList.contains('active');
          
          // If Run Pipelines tab is active and not Demo environment
          if (isConfigTabActive && option.getAttribute('data-value') !== 'demo') {
            const configContent = document.getElementById('config-content');
            const heading = configContent.querySelector('h2');
            
            // Save the heading
            const headingClone = heading.cloneNode(true);
            
            // Clear the content
            configContent.innerHTML = '';
            
            // Add back the heading
            configContent.appendChild(headingClone);
            
            // Add placeholder message
            const message = document.createElement('div');
            message.className = 'demo-only-message';
            message.style.marginTop = '2rem';
            message.style.padding = '1.5rem';
            message.style.borderRadius = '8px';
            message.style.backgroundColor = 'rgba(0,0,0,0.2)';
            message.style.border = '1px solid var(--border)';
            message.innerHTML = '<h3>Demo Content Only</h3><p>Content is only available when "Demo" environment is selected.</p>';
            
            configContent.appendChild(message);
          }
        });
      });
    });
    
    // Copy button functionality
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const code = btn.previousElementSibling.textContent;
        navigator.clipboard.writeText(code);
        
        // Visual feedback
        const originalIcon = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i>';
        setTimeout(() => {
          btn.innerHTML = originalIcon;
        }, 2000);
      });
    });
    
    // Add CSS for disabled state
    const style = document.createElement('style');
    style.textContent = `
      .option.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        border-color: var(--border);
        background: #1a1a1a;
        color: var(--text-secondary);
      }
      .option.disabled:hover {
        border-color: var(--border);
      }
      .section-title.disabled {
        opacity: 0.5;
      }
    `;
    document.head.appendChild(style);
    
    // Initialize UI based on default environment
    updateUIBasedOnEnvironment(currentConfig.environment);
    
    // Initialize content
    updateContent();

    // Update scroll handling to allow right panel to scroll independently
    document.addEventListener('DOMContentLoaded', function() {
      // Get references to panels
      const rightPanel = document.querySelector('.right-panel');
      const leftPanel = document.querySelector('.left-panel');
      
      // Remove the wheel event listener that was redirecting right panel scrolls to left panel
      rightPanel.removeEventListener('wheel', function(e) {
        // This function was previously redirecting scroll events
      });
      
      // Allow both panels to scroll independently
      rightPanel.style.overflowY = 'auto';
      leftPanel.style.overflowY = 'auto';
    });

    function enforceEqualButtonSizes() {
      const optionGroups = document.querySelectorAll('.options');
      
      optionGroups.forEach(group => {
        const options = group.querySelectorAll('.option');
        let maxWidth = 0;
        let maxHeight = 0;
        
        // Find the largest dimensions
        options.forEach(option => {
          const rect = option.getBoundingClientRect();
          maxWidth = Math.max(maxWidth, rect.width);
          maxHeight = Math.max(maxHeight, rect.height);
        });
        
        // Apply the largest dimensions to all options
        options.forEach(option => {
          option.style.width = `${maxWidth}px`;
          option.style.minHeight = `${maxHeight}px`;
        });
      });
    }
    
    // Run on page load
    window.addEventListener('load', enforceEqualButtonSizes);
    
    // Run when window is resized
    window.addEventListener('resize', enforceEqualButtonSizes);
    
    // Run when any option is clicked
    document.querySelectorAll('.option').forEach(option => {
      option.addEventListener('click', () => {
        setTimeout(enforceEqualButtonSizes, 10);
      });
    });

    // Fix scrolling issues in the right panel
    document.addEventListener('DOMContentLoaded', function() {
      // Get reference to right panel
      const rightPanel = document.querySelector('.right-panel');
      
      // Force enable scrolling
      if (rightPanel) {
        // Remove any existing event listeners that might interfere with scrolling
        rightPanel.onwheel = null;
        rightPanel.ontouchmove = null;
        
        // Set overflow explicitly with inline style (highest priority)
        rightPanel.style.overflowY = 'auto';
        rightPanel.style.overflowX = 'hidden';
        
        // Add a small amount of content padding to ensure scrollability
        const contentArea = document.getElementById('content-area');
        if (contentArea) {
          contentArea.style.paddingBottom = '2rem';
        }
        
        // Check if scrolling is working after a short delay
        setTimeout(function() {
          // If scrollHeight is greater than clientHeight, content should be scrollable
          console.log('Right panel scrollable:', rightPanel.scrollHeight > rightPanel.clientHeight);
          
          // If not scrollable but should be, try forcing it again
          if (rightPanel.scrollHeight > rightPanel.clientHeight && 
              getComputedStyle(rightPanel).overflowY !== 'auto') {
            rightPanel.style.overflowY = 'scroll';
          }
        }, 500);
      }
    });

    // Ensure right panel is scrollable
    document.addEventListener('DOMContentLoaded', function() {
      // Get reference to right panel
      const rightPanel = document.querySelector('.right-panel');
      
      if (rightPanel) {
        // Remove any existing event listeners that might interfere with scrolling
        rightPanel.onwheel = null;
        rightPanel.ontouchmove = null;
        
        // Force enable scrolling with inline style
        rightPanel.style.overflowY = 'auto !important';
        
        // Add some padding to ensure content is scrollable
        const contentArea = document.getElementById('content-area');
        if (contentArea) {
          contentArea.style.paddingBottom = '4rem';
        }
        
        // Log scrollability status
        console.log('Right panel scrollHeight:', rightPanel.scrollHeight);
        console.log('Right panel clientHeight:', rightPanel.clientHeight);
        console.log('Should be scrollable:', rightPanel.scrollHeight > rightPanel.clientHeight);
      }
    });

    // Make sure copy buttons work in the GitHub Codespace instructions
    document.addEventListener('DOMContentLoaded', function() {
      // Add click event listeners to all copy buttons
      document.querySelectorAll('.copy-btn').forEach(button => {
        button.addEventListener('click', function() {
          const codeElement = this.previousElementSibling.querySelector('code');
          const textToCopy = codeElement.textContent;
          
          navigator.clipboard.writeText(textToCopy).then(() => {
            // Visual feedback for copy
            const originalIcon = this.innerHTML;
            this.innerHTML = '<i class="fas fa-check"></i>';
            
            setTimeout(() => {
              this.innerHTML = originalIcon;
            }, 1500);
          });
        });
      });
    });

    // Force right panel scrolling - comprehensive fix
    document.addEventListener('DOMContentLoaded', function() {
      // Get reference to right panel
      const rightPanel = document.querySelector('.right-panel');
      
      if (rightPanel) {
        // Clear any existing scroll handlers
        rightPanel.onwheel = null;
        rightPanel.ontouchmove = null;
        
        // Force scrolling with inline style (highest priority)
        rightPanel.setAttribute('style', 'overflow-y: scroll !important; height: calc(100vh - 60px) !important;');
        
        // Add extra content to ensure scrollability
        const contentArea = rightPanel.querySelector('#content-area') || rightPanel;
        const extraSpace = document.createElement('div');
        extraSpace.style.height = '200px'; // Force extra space at bottom
        extraSpace.style.width = '100%';
        contentArea.appendChild(extraSpace);
        
        // Add event listener to prevent scroll event capture
        document.addEventListener('wheel', function(e) {
          if (rightPanel.contains(e.target)) {
            e.stopPropagation();
          }
        }, true);
        
        // Log scrollability info
        setTimeout(function() {
          console.log('Right panel scrollHeight:', rightPanel.scrollHeight);
          console.log('Right panel clientHeight:', rightPanel.clientHeight);
          console.log('Scroll difference:', rightPanel.scrollHeight - rightPanel.clientHeight);
        }, 500);
      }
    });
  </script>
  <!-- Add this script at the end of the body -->
  <script>
    // Function to ensure the Install Tracer content is set correctly
    function ensureInstallTracerContent() {
      const installContent = document.getElementById('install-content');
      if (installContent) {
        // Check if Demo environment is selected
        const isDemoSelected = document.querySelector('#environment-options .option.selected').getAttribute('data-value') === 'demo';
        
        if (isDemoSelected) {
          // Original Demo content
          installContent.innerHTML = `
            <h2>Install Tracer</h2>
            
            <div class="github-codespace-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
              <h3>Installation Instructions</h3>
              <h4>Github Codespace demo environment</h4>
              
              <p>Github Codespaces gives you an easy way to test Tracer's functionality without needing to install anything into your own system.</p>
              <p><em>Note that for perfect functionality, you should run Tracer on your own system. We cannot guarantee full functionality due to root access requirements.</em></p>
              
              <h4>Step 1: Open GitHub Codespaces</h4>
              <p>Codespaces will be your coding environment to run any pipeline as an alternative to installing Tracer into your own system.</p>
              <p>Press button below "Open GitHub Codespaces" and log into GitHub</p>
              
              <div style="margin: 1.5rem 0;">
                <a href="https://github.com/Tracer-Cloud/tracer-test-pipelines-bioinformatics/codespaces" target="_blank" class="github-button">
                  <i class="fab fa-github"></i> Open GitHub Codespaces
                </a>
              </div>
              
              <h4>Step 2: Create a new Codespace</h4>
              <p>⚠️ Important: update 'machine type' to 16-core before launching.</p>
              <p>This will allow for compute-intense processes to run faster.</p>
              <div style="margin: 1.5rem 0;">
                <img src="../assets/images/Tracer-Cloudtracer-test-pipelines-bioinformatics 1.webp" alt="Codespace creation interface" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--border);">
              </div>
              
              <h4>Step 3: Install Tracer</h4>
              <p>Before running any pipeline, you need to install Tracer once into your operating system.</p>
              <p>For Codespaces, as with any cloud system, we install the below line of code into the terminal:</p>
              <div class="code-container">
                <pre><code>curl -sSL https://install.tracer.cloud/ | bash -s -- demo && . ~/.bashrc</code></pre>
                <button class="copy-btn">
                  <i class="fas fa-copy"></i>
                </button>
              </div>
              <p>Tracer is now connected to your Codespaces' system. This is a one time installation.</p>
            </div>
          `;
        } else {
          // Content for all other environments (Cloud, Local)
          installContent.innerHTML = `
            <h2>Install Tracer</h2>
            
            <div class="tracer-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
              <h3>Installation Instructions</h3>
              <h4>Tracer pipelines</h4>
              
              <p>If you want to try with some prepared pipelines by Tracer, you can follow these following steps</p>
              
              <h4>Step 1: clone the Tracer repository</h4>
              <p>This includes a range of pipelines written in different languages (e.g., Bash, Nextflow, WDL, and CWL)</p>
              <div class="code-container">
                <pre><code>git clone https://github.com/Tracer-Cloud/tracer-test-pipelines-bioinformatics.git
cd tracer-test-pipelines-bioinformatics</code></pre>
                <button class="copy-btn">
                  <i class="fas fa-copy"></i>
                </button>
              </div>
              
              <h4>Step 2: Install Tracer init</h4>
              <p>For every new pipeline you launch, you run the below code in your terminal:</p>
              <div class="code-container">
                <pre><code>tracer init</code></pre>
                <button class="copy-btn">
                  <i class="fas fa-copy"></i>
                </button>
              </div>
              
              <p>It will ask you to setup the parameters of this pipeline. This allows for customisation and easy information retrieval later:</p>
              <p>--pipeline-name: what name do you give this pipeline? (one pipeline consists of multiple runs)<br>
              --environment: what is the environment you are running this in?<br>
              --pipeline-type: what type of pipeline are you running e.g., rnaseq, scrnaseq, xxxx. note you could also name this after a cost centre or team so that you can easily search the other pipelines<br>
              --user-operator: what is your name/who is running this pipeline?</p>
              
              <p>[exclamation mark] Add the "tracer init" line at the start of each pipeline. This allows the Tracer system to track each pipeline separately and combine the different runs when they have the same pipeline name.</p>
              
              <h4>Step 3: Run pipeline</h4>
              <p>We have pre-installed some pipelines the github repo for you to run.</p>
              <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
              <div class="code-container">
                <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir</code></pre>
                <button class="copy-btn">
                  <i class="fas fa-copy"></i>
                </button>
              </div>
              
              <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the pipelines files for you to test out.</p>
              
              <p>Play around with the other pipelines, have fun! 🧬</p>
            </div>
          `;
        }
        
        // Add event listeners to copy buttons
        installContent.querySelectorAll('.copy-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const code = this.previousElementSibling.textContent;
            navigator.clipboard.writeText(code);
            
            // Visual feedback
            const originalIcon = this.innerHTML;
            this.innerHTML = '<i class="fas fa-check"></i>';
            setTimeout(() => {
              this.innerHTML = originalIcon;
            }, 2000);
          });
        });
      }
    }
    
    // Run immediately
    ensureInstallTracerContent();
    
    // Also run when tabs are clicked
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', function() {
        if (this.getAttribute('data-tab') === 'install') {
          setTimeout(ensureInstallTracerContent, 10);
        }
      });
    });
    
    // Also run when environment options are clicked
    document.querySelectorAll('#environment-options .option').forEach(option => {
      option.addEventListener('click', function() {
        // Call ensureInstallTracerContent for any environment option click
        setTimeout(ensureInstallTracerContent, 10);
      });
    });

    // Add event listeners to pipeline options
    document.querySelectorAll('#pipeline-options .option').forEach(option => {
      option.addEventListener('click', function() {
        // Call ensureInstallTracerContent when pipeline options are clicked
        setTimeout(ensureInstallTracerContent, 10);
      });
    });

    // Add this at the end of the script section
    document.addEventListener('DOMContentLoaded', function() {
      // Add a specific event listener for environment options
      document.querySelectorAll('#environment-options .option').forEach(option => {
        option.addEventListener('click', function() {
          // Get the selected environment
          const environment = this.getAttribute('data-value');
          
          // Check if Run Pipelines tab is active
          const isConfigTabActive = document.querySelector('.tab[data-tab="config"]').classList.contains('active');
          
          // If Run Pipelines tab is active
          if (isConfigTabActive) {
            const configContent = document.getElementById('config-content');
            
            // If not Demo environment
            if (environment !== 'demo') {
              // Save the heading
              const heading = configContent.querySelector('h2');
              const headingClone = heading ? heading.cloneNode(true) : document.createElement('h2');
              headingClone.textContent = headingClone.textContent || 'Run Pipelines';
              
              // Clear the content
              configContent.innerHTML = '';
              
              // Add back the heading
              configContent.appendChild(headingClone);
              
              // Add non-Demo content
              configContent.innerHTML += `
                <div class="tracer-instructions" style="margin-top: 2rem; border: 1px solid var(--border); padding: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.2);">
                  <h4>Step 3: Run pipeline</h4>
                  <p>We have pre-installed some pipelines the github repo for you to run.</p>
                  <p>We would recommend to start with a simple rnaseq pipeline in Nextflow:</p>
                  <div class="code-container">
                    <pre><code>nextflow run nf-core/rnaseq -c custom.config -profile docker,test --outdir</code></pre>
                    <button class="copy-btn">
                      <i class="fas fa-copy"></i>
                    </button>
                  </div>
                  <p>Other pipelines, written in Bash, Nextflow, WDL, and CWL can be found under the <code>pipelines</code> files for you to test out.</p>
                  <p>Play around with the other pipelines, have fun! 🧬</p>
                </div>
              `;
              
              // Add event listeners to copy buttons
              configContent.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                  const code = this.previousElementSibling.textContent;
                  navigator.clipboard.writeText(code);
                  
                  // Visual feedback
                  const originalIcon = this.innerHTML;
                  this.innerHTML = '<i class="fas fa-check"></i>';
                  setTimeout(() => {
                    this.innerHTML = originalIcon;
                  }, 2000);
                });
              });
            }
          }
        });
      });
    });
  </script>
  <script src="fix-run-pipelines.js"></script>
</body>
</html>
