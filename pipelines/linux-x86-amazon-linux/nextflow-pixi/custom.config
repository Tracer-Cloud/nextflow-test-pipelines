process.errorStrategy = 'ignore'

// Skip processes that require tools not available in this environment
process {
    withName: '.*BBMAP.*' {
        errorStrategy = 'ignore'
    }

    withName: '.*FQ_LINT.*' {
        errorStrategy = 'ignore'
    }
}

// Set resource limits for low-memory, low-CPU systems
process {
    // Default resource limits - conservative for low-memory systems
    cpus = 1
    memory = '512 MB'
    time = '1 h'

    // Override specific processes that typically need more resources
    withName: '.*GUNZIP.*' {
        cpus = 1
        memory = '256 MB'
    }

    withName: '.*CAT_FASTQ.*' {
        cpus = 1
        memory = '256 MB'
    }

    withName: '.*STAR.*' {
        cpus = 1
        memory = '512 MB'
    }

    withName: '.*HISAT2.*' {
        cpus = 1
        memory = '512 MB'
    }

    withName: '.*SALMON.*' {
        cpus = 1
        memory = '512 MB'
    }

    // Version check processes - very low memory requirements
    withName: 'fastqc_version|star_version|samtools_version|bwa_version|gatk_version|save_results' {
        cpus = 1
        memory = '128 MB'
        time = '2 min'
    }

    // Catch-all for any process that might still request too many resources
    withLabel: 'process_single' {
        cpus = 1
        memory = '256 MB'
    }

    withLabel: 'process_low' {
        cpus = 1
        memory = '512 MB'
    }

    withLabel: 'process_medium' {
        cpus = 1
        memory = '768 MB'
    }

    withLabel: 'process_high' {
        cpus = 1
        memory = '768 MB'
    }
} 